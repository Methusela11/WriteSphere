{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WriteSphere | Dashboard</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Bootstrap Icons + Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'assets/css/dashboard.css' %}" />
</head>

<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
          <a href="{% url 'dashboard' %}" class="logo-link">
              <img src="{% static 'assets/img/logo/logo-t.png' %}" alt="WS Logo" />
          </a>
      </div>

      <nav class="menu">
        <ul>
            <li title="Dashboard" class="active"><i class="bi bi-house-door"></i><a href="{% url 'dashboard' %}"><span class="text"> Dashboard</span></a></li>
            <li title="Available Tasks"><i class="bi bi-list-task"></i><span class="text"> Available Tasks</span></li>
            <li title="Premium Tasks"><i class="bi bi-bookmark-star"></i><span class="text"> Premium Tasks</span></li>
            <li title="Awarded Tasks"><i class="bi bi-award"></i><span class="text"> Awarded Tasks</span></li>
            <li title="Submission Panel"><i class="bi bi-upload"></i><span class="text"> Submission Panel</span></li>
            <li title="Withdraw Money"><i class="bi bi-bank"></i><span class="text"> Withdraw Money</span></li>
            <li title="Apply For Training"><i class="bi bi-mortarboard"></i><span class="text"> Apply For Training</span></li>
            <li title="Special Training"><i class="bi bi-stars"></i><span class="text"> Special Training</span></li>
        </ul>
        <p class="text p-2"><b>EXTRA</b></p>
        <ul>
          <li title="Profile"><i class="bi bi-person-circle"></i><span class="text"> Profile</span></li>
          <li title="Referral Program"><i class="bi bi-sliders"></i><span class="text"> Referral Program</span></li>
          <li title="FAQs"><i class="bi bi-question-circle"></i><span class="text"> FAQs</span></li>
          <li title="Logout"><i class="bi bi-box-arrow-right"></i><a href="{% url 'login' %}"><span class="text"> Logout</span></a></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Section -->
    <main class="main">
      <header class="topbar">
        <button class="menu-btn"><i class="fas fa-bars"></i></button>
        <h4>Welcome Methusela!</h4>
        <div class="profile">
          <i class="fas fa-bell"></i>
          <div class="avatar"><i class="bi bi-person-circle"></i></div>
        </div>
      </header>

      <section class="dashboard">
        <div class="title">
          <h2>Dashboard</h2>
          <p>KENYAWRITERZ</p>
          <small>0d 10h 55m 17s â€” to new tasks.</small>
        </div>

        <div class="cards">
          <div class="card"><h4>Name</h4><p>METHUSELA ENOCH</p></div>
          <div class="card"><h4>Username</h4><p>RMEKSGAMER</p></div>
          <div class="card"><h4>Account Status</h4><span class="status active">Active</span></div>
          <div class="card"><h4>Total Money In</h4><p>KSH 00</p></div>
          <div class="card"><h4>Current Balance</h4><p>KSH 00</p></div>
          <div class="card"><h4>Total Withdrawals</h4><p>KSH 00</p></div>
        </div>

        <div class="account-level">
          <h4>Account Level</h4>
          <p>Premium <i class="fas fa-check-circle"></i></p>
        </div>

        <div class="contact">
          <h4>You Can Find Us:</h4>
          <p>WhatsApp: <a href="#">Click to WhatsApp us</a></p>
          <p>Email: <a href="mailto:support@kenyawriterz.com">support@kenyawriterz.com</a></p>
        </div>

        <div class="certificates">
          <h4>Certificate Of Incorporation</h4>
          <p>09/11/2025</p>
          <div class="certificate-box">[Certificate Image Here]</div>

          <h4>Client Money Protection Clause</h4>
          <p>09/11/2025</p>
          <div class="certificate-box">[Protection Clause Image Here]</div>
        </div>
      </section>
    </main>
  </div>

  <!-- JavaScript -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const sidebar = document.querySelector(".sidebar");
    const main = document.querySelector(".main");
    const menuBtn = document.querySelector(".menu-btn");
    const overlay = document.createElement("div");

    overlay.className = "overlay";
    document.body.appendChild(overlay);

    // Restore saved sidebar state
    if (localStorage.getItem("sidebar-collapsed") === "true") {
      sidebar.classList.add("collapsed");
      main.classList.add("collapsed");
    }

    function toggleSidebar() {
      sidebar.classList.toggle("collapsed");
      main.classList.toggle("collapsed");
      const isCollapsed = sidebar.classList.contains("collapsed");
      localStorage.setItem("sidebar-collapsed", isCollapsed);
      if (window.innerWidth <= 992) overlay.classList.toggle("active", !isCollapsed);
    }

    menuBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      toggleSidebar();
    });

    overlay.addEventListener("click", () => {
      sidebar.classList.add("collapsed");
      main.classList.add("collapsed");
      overlay.classList.remove("active");
      localStorage.setItem("sidebar-collapsed", true);
    });

    const handleResize = () => {
      if (window.innerWidth <= 992) {
        sidebar.classList.add("collapsed");
        main.classList.add("collapsed");
      } else {
        overlay.classList.remove("active");
        if (localStorage.getItem("sidebar-collapsed") === "false") {
          sidebar.classList.remove("collapsed");
          main.classList.remove("collapsed");
        }
      }
    };

    handleResize();
    window.addEventListener("resize", handleResize);

    sidebar.querySelectorAll("li").forEach((item) => {
      item.addEventListener("mouseenter", () => {
        if (sidebar.classList.contains("collapsed")) item.classList.add("hovered");
      });
      item.addEventListener("mouseleave", () => {
        item.classList.remove("hovered");
      });
    });
  });
  </script>
</body>
</html>
